"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[778],{3247:(e,t,o)=>{o.r(t),o.d(t,{default:()=>De});var n=o(9726);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach(function(t){s(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function s(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var i={class:"row px-4"},c={class:"col-md-3"},m={class:"card mb-4"},d={class:"card-body"},p=["textContent"],u={class:"mb-3"},f=["textContent"],b=["textContent"],y={class:"mb-3"},_=["textContent"],w=["value"],v=["textContent"],N={class:"card mb-4"},V={class:"card-body"},C=["textContent"],E={class:"mb-3"},x=["textContent"],k=["textContent"],g={class:"mb-3"},D=["textContent"],S=["textContent"],h={class:"mb-3"},$=["textContent"],T=["textContent"],B=["textContent"],O={class:"card mb-4"},P={class:"card-body"},j=["textContent"],M={class:"form-check form-switch"},U=["textContent"],q={key:0,class:"my-3"},z=["textContent"],H={key:0,class:"my-4"},A=["textContent"],Y=["textContent"],F={class:"my-4"},L=["textContent"],Q=["textContent"],R={class:"mt-3"},I=["textContent"],G={class:"col-md-9"},J={class:"card"},K={class:"card-body"},W=["textContent"],X={class:"row"},Z={class:"col-md-3"},ee=["textContent"],te={class:"col-md-5"},oe=["textContent"],ne=["onSubmit"],re={class:"col-md-2"},le=["for","textContent"],ae=["id","value"],se={class:"col-md-4"},ie=["for","textContent"],ce=["id","value"],me={class:"col-md-6"},de={class:"d-flex"},pe=["textContent"],ue=["onClick","textContent"],fe={class:"d-flex"},be=["textContent"],ye={class:"col-md-3"},_e=["textContent"],we=["textContent"],ve={class:"col-md-6"},Ne=["textContent"],Ve={class:"col-md-2"},Ce=["textContent"];var Ee=o(713),xe=o(4353),ke=o.n(xe);const ge={name:"Profile",components:{VueQrcode:Ee.A},props:{name:{type:String,required:!0},email:{type:String,required:!0},otp:{type:Object,required:!0},tokens:{type:Array,required:!0}},data:function(){return{details_form:this.$inertia.form({_sec:"details",name:this.name}),password_form:this.$inertia.form({_sec:"password",password:"",new_password:"",new_password_confirmation:""}),otp_form:this.$inertia.form({_sec:"otp",password:"",enabled:this.otp.enabled,code:null}),create_token_form:this.$inertia.form({_sec:"createToken",name:null,abilities:["*"]})}},methods:{updateToken:function(e,t){this.$inertia.form({_sec:"updateToken",id:t.id,name:e.target.name.value}).post("")},deleteToken:function(e){var t=this;Swal.fire({icon:"warning",title:this.$t("Are you sure"),text:this.$t("Are you sure you want to delete")+' "'+e.name+'"',showCancelButton:!0}).then(function(o){o.isConfirmed&&t.$inertia.form({_sec:"deleteToken",id:e.id}).post("")})},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD.MM.YYYY HH:mm:ss";return e?ke()(e).format(t):null}}};const De=(0,o(6262).A)(ge,[["render",function(e,t,o,r,l,s){var Ee=(0,n.resolveComponent)("Head"),xe=(0,n.resolveComponent)("vue-qrcode"),ke=(0,n.resolveComponent)("Layout");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[(0,n.createVNode)(Ee,{title:e.$t("Profile")},null,8,["title"]),(0,n.createVNode)(ke,null,{default:(0,n.withCtx)(function(){return[(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("div",m,[(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("h5",{class:"mb-2",textContent:(0,n.toDisplayString)(e.$t("Details"))},null,8,p),(0,n.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,n.withModifiers)(function(e){return l.details_form.post("")},["prevent"]))},[(0,n.createElementVNode)("div",u,[(0,n.createElementVNode)("label",{for:"profile_name",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Name"))},null,8,f),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",class:(0,n.normalizeClass)(["form-control form-control-sm",{"is-invalid":l.details_form.errors.name}]),id:"profile_name","aria-describedby":"emailHelp","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.details_form.name=e})},null,2),[[n.vModelText,l.details_form.name]]),(0,n.createElementVNode)("div",{class:"invalid-feedback",textContent:(0,n.toDisplayString)(l.details_form.errors.name)},null,8,b)]),(0,n.createElementVNode)("div",y,[(0,n.createElementVNode)("label",{for:"profile_email",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Email address"))},null,8,_),(0,n.createElementVNode)("input",{type:"email",class:"form-control form-control-sm",id:"profile_email","aria-describedby":"emailHelp",value:o.email,disabled:""},null,8,w)]),l.details_form.isDirty?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,type:"submit",class:"btn btn-primary btn-sm rounded-1",textContent:(0,n.toDisplayString)(e.$t("Submit"))},null,8,v)):(0,n.createCommentVNode)("",!0)],32)])]),(0,n.createElementVNode)("div",N,[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("h5",{class:"mb-2",textContent:(0,n.toDisplayString)(e.$t("Change password"))},null,8,C),(0,n.createElementVNode)("form",{onSubmit:t[5]||(t[5]=(0,n.withModifiers)(function(e){return l.password_form.post("")},["prevent"]))},[(0,n.createElementVNode)("div",E,[(0,n.createElementVNode)("label",{for:"profile_password",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Current password"))},null,8,x),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",class:(0,n.normalizeClass)(["form-control form-control-sm",{"is-invalid":l.password_form.errors.password}]),id:"profile_password",autocomplete:"current-password","onUpdate:modelValue":t[2]||(t[2]=function(e){return l.password_form.password=e})},null,2),[[n.vModelText,l.password_form.password]]),(0,n.createElementVNode)("div",{class:"invalid-feedback",textContent:(0,n.toDisplayString)(l.password_form.errors.password)},null,8,k)]),(0,n.createElementVNode)("div",g,[(0,n.createElementVNode)("label",{for:"profile_new_password",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("New password"))},null,8,D),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",class:(0,n.normalizeClass)(["form-control form-control-sm",{"is-invalid":l.password_form.errors.new_password}]),id:"profile_new_password",autocomplete:"new-password","onUpdate:modelValue":t[3]||(t[3]=function(e){return l.password_form.new_password=e})},null,2),[[n.vModelText,l.password_form.new_password]]),(0,n.createElementVNode)("div",{class:"invalid-feedback",textContent:(0,n.toDisplayString)(l.password_form.errors.new_password)},null,8,S)]),(0,n.createElementVNode)("div",h,[(0,n.createElementVNode)("label",{for:"profile_new_password_confirmation",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Confirm new password"))},null,8,$),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",class:(0,n.normalizeClass)(["form-control form-control-sm",{"is-invalid":l.password_form.errors.new_password_confirmation}]),id:"profile_new_password_confirmation",autocomplete:"new-password","onUpdate:modelValue":t[4]||(t[4]=function(e){return l.password_form.new_password_confirmation=e})},null,2),[[n.vModelText,l.password_form.new_password_confirmation]]),(0,n.createElementVNode)("div",{class:"invalid-feedback",textContent:(0,n.toDisplayString)(l.password_form.errors.new_password_confirmation)},null,8,T)]),l.password_form.isDirty?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,type:"submit",class:"btn btn-primary btn-sm rounded-1",textContent:(0,n.toDisplayString)(e.$t("Submit"))},null,8,B)):(0,n.createCommentVNode)("",!0)],32)])]),(0,n.createElementVNode)("div",O,[(0,n.createElementVNode)("div",P,[(0,n.createElementVNode)("h5",{class:"mb-2",textContent:(0,n.toDisplayString)(e.$t("Two factor authentication"))},null,8,j),(0,n.createElementVNode)("form",{onSubmit:t[9]||(t[9]=(0,n.withModifiers)(function(e){return l.otp_form.transform(function(e){return a(a({},e),{},{secret:o.otp.secret,url:o.otp.url})}).post("")},["prevent"]))},[(0,n.createElementVNode)("div",M,[(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"require_mfa","onUpdate:modelValue":t[6]||(t[6]=function(e){return l.otp_form.enabled=e})},null,512),[[n.vModelCheckbox,l.otp_form.enabled]]),(0,n.createElementVNode)("label",{class:"form-check-label",for:"require_mfa",textContent:(0,n.toDisplayString)(e.$t("Require Two factor authentication"))},null,8,U)]),o.otp.url?((0,n.openBlock)(),(0,n.createElementBlock)("div",q,[(0,n.createElementVNode)("p",{textContent:(0,n.toDisplayString)(e.$t("Please scan the QR code with your OTP app"))},null,8,z),(0,n.createVNode)(xe,{class:"d-block mx-auto",value:o.otp.url,options:{width:242}},null,8,["value"]),o.otp.enabled?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",H,[(0,n.createElementVNode)("label",{for:"mfa_code",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Enter generated code"))},null,8,A),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",inputmode:"numeric",class:(0,n.normalizeClass)(["form-control form-control-sm text-center",{"is-invalid":l.otp_form.errors.code}]),id:"mfa_code",minlength:"6",maxlength:"6",autocomplete:"current-password","onUpdate:modelValue":t[7]||(t[7]=function(e){return l.otp_form.code=e})},null,2),[[n.vModelText,l.otp_form.code]]),(0,n.createElementVNode)("div",{class:"invalid-feedback",textContent:(0,n.toDisplayString)(l.otp_form.errors.code)},null,8,Y)]))])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",F,[(0,n.createElementVNode)("label",{for:"mfa_profile_password",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Password"))},null,8,L),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"password",class:(0,n.normalizeClass)(["form-control form-control-sm",{"is-invalid":l.otp_form.errors.password}]),id:"mfa_profile_password",autocomplete:"current-password","onUpdate:modelValue":t[8]||(t[8]=function(e){return l.otp_form.password=e})},null,2),[[n.vModelText,l.otp_form.password]]),(0,n.createElementVNode)("div",{class:"invalid-feedback",textContent:(0,n.toDisplayString)(l.otp_form.errors.password)},null,8,Q)]),(0,n.createElementVNode)("div",R,[l.otp_form.isDirty?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,type:"submit",class:"btn btn-primary btn-sm rounded-1",textContent:(0,n.toDisplayString)(e.$t("Submit"))},null,8,I)):(0,n.createCommentVNode)("",!0)])],32)])])]),(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("div",J,[(0,n.createElementVNode)("div",K,[(0,n.createElementVNode)("h5",{class:"mb-2",textContent:(0,n.toDisplayString)(e.$t("API Tokens"))},null,8,W),(0,n.createElementVNode)("div",X,[(0,n.createElementVNode)("div",Z,[(0,n.createElementVNode)("p",{class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Name"))},null,8,ee)]),(0,n.createElementVNode)("div",te,[(0,n.createElementVNode)("p",{class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Token"))},null,8,oe)])]),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.tokens,function(o){return(0,n.openBlock)(),(0,n.createElementBlock)("form",{key:o.id,onSubmit:(0,n.withModifiers)(function(e){return s.updateToken(e,o)},["prevent"]),class:"row mb-3"},[(0,n.createElementVNode)("div",re,[(0,n.createElementVNode)("label",{for:"token_"+o.id+"_name",class:"sr-only",textContent:(0,n.toDisplayString)(e.$t("Name"))},null,8,le),(0,n.createElementVNode)("input",{type:"text",id:"token_"+o.id+"_name",name:"name",value:o.name,class:"form-control form-control-sm"},null,8,ae)]),(0,n.createElementVNode)("div",se,[(0,n.createElementVNode)("label",{for:"token_"+o.id+"_token",class:"sr-only",textContent:(0,n.toDisplayString)(e.$t("Token"))},null,8,ie),(0,n.createElementVNode)("input",{type:"text",readonly:"",id:"token_"+o.id+"_token",name:"token",value:o.token,class:"form-control form-control-sm font-monospace",style:{background:"#e9ecef"}},null,8,ce)]),(0,n.createElementVNode)("div",me,[(0,n.createElementVNode)("div",de,[(0,n.createElementVNode)("button",{type:"submit",class:"btn btn-primary btn-sm rounded-1",textContent:(0,n.toDisplayString)(e.$t("Update"))},null,8,pe),t[15]||(t[15]=(0,n.createElementVNode)("div",{class:"mx-1"},null,-1)),(0,n.createElementVNode)("button",{type:"button",onClick:function(e){return s.deleteToken(o)},textContent:(0,n.toDisplayString)(e.$t("Delete")),class:"btn btn-danger btn-sm rounded-1"},null,8,ue),t[16]||(t[16]=(0,n.createElementVNode)("div",{class:"mx-2"},null,-1)),(0,n.createElementVNode)("div",fe,[(0,n.createElementVNode)("small",null,[t[12]||(t[12]=(0,n.createElementVNode)("strong",null,"Created",-1)),(0,n.createTextVNode)(": "+(0,n.toDisplayString)(s.formatDate(o.created_at)),1)]),t[14]||(t[14]=(0,n.createElementVNode)("div",{class:"mx-2"},null,-1)),(0,n.createElementVNode)("small",null,[t[13]||(t[13]=(0,n.createElementVNode)("strong",null,"Used",-1)),(0,n.createTextVNode)(": "+(0,n.toDisplayString)(s.formatDate(o.last_used_at)||"Never"),1)])])])])],40,ne)}),128)),(0,n.createElementVNode)("form",{onSubmit:t[11]||(t[11]=(0,n.withModifiers)(function(e){return l.create_token_form.post("",{onSuccess:function(){return l.create_token_form.name=""}})},["prevent"])),class:"mt-5 row"},[(0,n.createElementVNode)("h6",{textContent:(0,n.toDisplayString)(e.$t("Create new token"))},null,8,be),(0,n.createElementVNode)("div",ye,[(0,n.createElementVNode)("label",{for:"create_token_name",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Name"))},null,8,_e),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",class:(0,n.normalizeClass)(["form-control form-control-sm",{"is-invalid":l.create_token_form.errors.name}]),id:"create_token_name","aria-describedby":"createTokenNameHelp","onUpdate:modelValue":t[10]||(t[10]=function(e){return l.create_token_form.name=e})},null,2),[[n.vModelText,l.create_token_form.name]]),l.create_token_form.errors.name?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,textContent:(0,n.toDisplayString)(l.create_token_form.errors.name),id:"createTokenNameHelp",class:"invalid-feedback"},null,8,we)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",ve,[(0,n.createElementVNode)("label",{for:"create_token_token",class:"form-label",textContent:(0,n.toDisplayString)(e.$t("Token"))},null,8,Ne),t[17]||(t[17]=(0,n.createElementVNode)("input",{type:"text",disabled:"",class:"form-control form-control-sm",id:"create_token_token"},null,-1))]),(0,n.createElementVNode)("div",Ve,[t[18]||(t[18]=(0,n.createElementVNode)("div",{class:"form-label"}," ",-1)),l.create_token_form.isDirty?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,type:"submit",class:"btn btn-primary btn-sm rounded-1",textContent:(0,n.toDisplayString)(e.$t("Create"))},null,8,Ce)):(0,n.createCommentVNode)("",!0)])],32)])])])])]}),_:1})],64)}]])}}]);
//# sourceMappingURL=Profile.js.map?id=d834a6f5fc3d0d36